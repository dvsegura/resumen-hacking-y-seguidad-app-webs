<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Resumen Hacking y seguridad de páginas webs</title>
  </head>
  <body>
    <h1 id="beginning">Resumen "Hacking y seguridad de páginas webs"</h1>
    <h2>Autores:</h2>
    <ul>
      <li>Antonio Ángel Ramos</li>
      <li>Carlos Alberto Barbero Muños</li>
      <li>Ruben Martinez Sanchez</li>
      <li>Ángel García Moreno</li>
      <li>Jesús María González Navada</li>
    </ul>
    <main>
      <section>
        <h2>Índice</h2>
        <div>
          <a href="#cap1">Capítulo 1.Introducción al Pentest web</a>
        </div>
        <div>
          <a href="#cap2">Capítulo 2. Ataques SQL Injection a base de datos</a>
        </div>
        <div>
          <a href="#cap3">Capítulo 3. Cross-Site Scripting</a>
        </div>
      </section>
      <section id="cap1">
        <h2>Introducción al pentest web <a href="#beginning">^</a></h2>
        <h2>1.1 ETAPAS DEL PENTEST</h2>
        <h4>
          Clasificación dependiendo del nivel de información de partida a la
          hora de realizar el test de penetración
        </h4>
        <ul>
          <li>Caja Negra(no se dispone de información)</li>
          <li>
            Caja Blanca(el penester dispone del total de información sobre el
            sistema a auditar)
          </li>
          <li>Caja Gris(mezcla de las dos anteriores)</li>
        </ul>
        <h4>Metodologías</h4>
        <ul>
          <li>
            <a href="https://www.nist.gov/" target="_blank"
              >NIST(National Institute of Standards and Technology)</a
            >
          </li>
          <li>
            <a href="https://owasp.org/"
              >OWASP(Open Web Application Security Project)</a
            >
          </li>
          <li>
            <a href="https://www.isecom.org/research.html"
              >OSSTMM(Open Source Security Testing Methodology Manual)</a
            >
          </li>
        </ul>
        <h3>Etapas</h3>
        <h4>Reconocimiento (Primera)</h4>
        <p>
          Se obtendrá toda la información disponible en medios de acceso público
          sobre el objetivo. Se podrán emplear técnicas de reconocimiento pasivo
          y activo.
        </p>
        <b>Pasiva</b>
        <ul>
          <li>Hacking con buscadores</li>
          <li>Uso de herramientas de gestión de red(nslookup, dig)</li>
          <li>
            Herramientas de búsqueda de metadatos o indagación en redes sociales
          </li>
        </ul>
        <b>Activa</b>
        <ul>
          <li>Atacante interactua con la víctima(ingeniería social)</li>
        </ul>
        <table>
          <thead>
            <th>Fase</th>
            <th>Descripción</th>
            <th>Objetivos</th>
            <th>Herramientas</th>
          </thead>
          <tbody>
            <tr>
              <td>Enumeración</td>
              <td>
                Se escaneará la red para obtener una imagen de su arquitectura
              </td>
              <td>IPs,DNS,SO,cortafuegos,servicios activos, etc</td>
              <td>Nmap,hping3,traceroute,etc</td>
            </tr>
            <tr>
              <td>Explotación</td>
              <td>
                Se emplearán <i><b>exploits</b></i> contra servicios y
                aplicaciones vulnerables, <i><b>fuzzing</b></i> para detectar
                posibles errores no controlados.
              </td>
              <td>
                Elevación de privilegios e intentar mantener ese acceso no
                autorizado mediante la instalación de <b>backdoors</b> y
                <b>rootkits</b>
              </td>
              <td>Metasploit, Canvas</td>
            </tr>
            <tr>
              <td>Documentación</td>
              <td>
                Documentar información obtenida en las etapas anteriores ¡,
                describir paso a paso los ataques realizados junto a los
                resultados producidos.
              </td>
              <td>Cliente conozca las vulnerabilidades de su aplicación</td>
              <td>
                Finalizar con consejos para solucionar las vulnerabilidades
                descubiertas.
              </td>
            </tr>
          </tbody>
        </table>
        <h2>1.2 INTRODUCCION PROTOCOLO HTTP(HyperText Transfer Protocol)</h2>
        <p>
          Es un protocolo de la capa de Aplicacion de Modelo OSI. Este protocolo
          permite realizar peticiones y respuestas en una arquitectura
          cliente-servidor. Existen los campos de cabecera de peticion y de
          respuesta HTTP.
        </p>
        <p>Códigos de respuesta HTTP:</p>
        <table>
          <thead>
            <th>Código</th>
            <th>Mensaje</th>
          </thead>
          <tbody>
            <tr>
              <td>1xx</td>
              <td>Mensaje informativo.</td>
            </tr>
            <tr>
              <td>2xx</td>
              <td>Petición recibida y procesada correctamente.</td>
            </tr>
            <tr>
              <td>3xx</td>
              <td>Indica que hay que hacer una redirección.</td>
            </tr>
            <tr>
              <td>4xx</td>
              <td>Se ha producido un error en el cliente.</td>
            </tr>
            <tr>
              <td>5xx</td>
              <td>Se ha producido un error en el servidor.</td>
            </tr>
          </tbody>
        </table>
        <h2>1.3 ENTORNOS BASICOS DE PRUEBAS</h2>
        <h3>1.3.1 Entornos webs vulnerables</h3>
        <p>
          Metasploitable2(máquina virtual que aloja DVWA Y NOWASP Mutillidae)
        </p>
        <p>Metasploitable2 - pasos para poner en funcionamiento en VMWare.</p>
        <ol>
          <li>Descargar .zip</li>
          <li>
            Descomprimir, ir a VMWare al menu File > Open y escoger el archivo
            .vmx
          </li>
        </ol>
        <p>
          Nota: Por defecto la tarjeta de red de Metasploitable esta en modo
          NAT.
        </p>
        <p>
          Recomendación: Usar el modo <b>Host Only</b> para aislar la máquina
          virtual de cualquier red externa debido a que cuenta con muchos
          servicios vulnerables y podria ser un riesgo potencial.
        </p>
        <p>
          Datos de acceso para entrar a la máquina virtual user y
          password(msfadmin)
        </p>
        <p>
          Una vez dentro ejecutar comando <b>ipconfig</b> para obtener la
          direccion ip y poder acceder al menu web de Metasploitable(http://ip)
        </p>
        <p>
          Resumen: Entornos web vulnerables DWVA(Damn Vulnerable Web
          Application) y NOWASP Mutillidae(Cubre todas las vulnerabilidades
          presentes enla lista OWASP TOP Ten, "HTML5 Web Storage" o "Click
          Jacking").
        </p>
        <h3>1.3.2 Entorno del atacante</h3>
        <h4>Suite de <i>pentest</i></h4>
        <ul>
          <li>
            <b><a href="http://www.kali.org/downloads">Kali Linux</a></b> -
            dispone de un sistema operativo Debian sobre el que se han instalado
            numeras herramientas orietadas a la realización de auditorías webs.
          </li>
          <li>
            <b>BugtraqTeam</b> - presenta distintos entornos gráficos muy
            amigables, herramientas de <i>hacking</i>, etc
          </li>
        </ul>
        <p>Dercargar en formato máquina virtual para VMWare</p>
        <p>
          <b>IMPORTANTE!</b> se debe tener en cuenta el modo de la tarjeta de
          red. Dicho modo debe coicidir con el establecido en la Metasploitable
          2, de forma que ambas máquinas esten en la misma red.
        </p>
        <h2>1.4 FIGENRPRINTING WE SERVERS</h2>
        <p>
          El término <i>fingerprinting</i> hace referencia a la huella
          distintiva que permite identificar un sistema. En este caso, estaremos
          profundizando en el HTTP <i>Fingerprinting</i>
        </p>
        <h3>1.4.1 Tipo y versión del servidor web</h3>
        <p>
          <b>Etiquetas Server y Vía de la cabecera HTTP</b>. Este método de
          <i>fingerprinting</i> consiste en impeccionar la cabecera HTTP
          devuelta por el servidor en busca de la etiqueta Server. De forma
          genérica esta técnica de conoce como <i>Banner Grabing</i>
        </p>
        <p>
          el campo Vía de la cabecera es utilizado por proxiesy gateways para
          indicar los protocolos entre el User Agent y el Server.
        </p>
        <p>
          <b>Identificación a través de páginas de error</b>.La idea consiste en
          eviar peticiones mal formadas para que el servidor responda con una
          página de error(error 404) donde se pueden revelar informacion sobre
          el SW empleado en el servidor. Por eso es tan importante establecer
          páginas de error personalizadas.
        </p>
        <p>
          <b>Análisis del comportamiento de la respuesta HTTP</b>. Consiste en
          realizar diversos tipos de peticiones y estudiar las respuestas
          devueltas por distintos modelos de servidores. Ejemplos a continuación
        </p>
        <ul>
          <li>Distintos campos en la cabecera</li>
          <li>Orden de los campos de la cabecera</li>
          <li>Lista de los métodos permitidos</li>
          <li>Respuestas antes peticiones DELETE</li>
        </ul>
        <h3>Tecnologías empleadas en el servidor web</h3>
        <p>
          Otro aspecto importante para poder orientar adecuandamente los ataques
          que realizará el auditor es el de determinar las tecnologías con las
          que trabaja el servidor. A partir de esta información el
          <i>pentester</i> podrá buscar vulnerabilidades propias de esos
          lenguajes y seleccionar la sintaxis de sus inyecciones de código
          malicioso.
        </p>
        <p>
          Formas de determinar las tecnologías con que trabaja el Servidor web:
        </p>
        <ul>
          <li>Cabecera X-Powered-By</li>
          <li>Extensiones de los scripts</li>
          <li>Contenido de las cookies</li>
        </ul>
        <h3>1.4.3 Herramientas automatizadas</h3>
        <ul>
          <li>
            Httprint(permite llevar procesos de identificación aun cuando hay un
            WAF como ModSecurity)
          </li>
          <li>
            Nmap(permite escanear redes para la realización de auditorias de
            seguirdad.Caracteristica potente Nmap Script Engine(NSE))
          </li>
          <li>
            WhatWeb(herramienta cuyo objetivo es realizar el proceso de
            <i>fingerprinting</i> de servidores web,gestores de contenidos,
            frameworks para blogs,librerias de JavaScript. Ademas
            <i>Torificar(red Tor-The Union Router-)</i> la herramienta)
          </li>
          <li>
            BlindElephant(herramienta escrita en Python usa tecnicas de
            detección no invasiva y rápida)
          </li>
        </ul>
        <h2>INFORMATION GATHERING</h2>
        <h3>1.5.1 Ingeniería social</h3>
        <p>
          Por ingenieria social se entiende cualquier técnica usada que pretenda
          aprovecharse del factor humano para consecución de revelaciones de
          informaciones.
        </p>
        <h3>1.5.2 Información del registro de nombre de dominio</h3>
        <p>
          Cuando se registra un nombre de dominio público o cuando se solicita
          la propiedad de un direccion de IP esta queda asociada a un registro
          con información diversa sobre el titular del servicio(datos de interés
          como servidores DNS, emails de administradores). El protocolo que
          permite la consulta de esta información se denomina
          <b><i>whois</i></b> y es posible trabajar con el mismo a través de
          herramientas de linea de comando o portales webs ej.
          <a href="http://allwhois.org" target="_blank">http://allwhois.org</a>
        </p>
        <h3>1.5.3 Consultas de zona DNS</h3>
        <p>
          Los serivdores DNS(Domain Name System) son aquellos encargados de
          realizar la traduccion de nombres de dominio, más sencillos de
          recordar, a sus correspondientes direcciones IP en Internet.
        </p>
        <p>Herramientas de consultas DNS</p>
        <ul>
          <li>Nslookup(herramienta tradicional se considera anticuada)</li>
          <li>Dig(potente)</li>
          <li>Host(sencilla, para consultas de menos extensión.)</li>
        </ul>
        <h2>1.6 HACKING CON BUSCADORES</h2>
        <p>
          Técnica que complementaría la fase de "<b
            ><i>information gathering</i></b
          >" y que consiste en usar los propios motores de búsquedas de Internet
          para localizar informción sencible o útil para un posible ataque.
        </p>
        <ul>
          <li>google(oepradores:site,intitle, inurl,intext, filetype)</li>
          <li>Shodan(criterios: city, country,os,port)</li>
        </ul>
      </section>
      <section id="cap2">
        <h2>
          Capítulo 2 Ataques SQL Injection a bases de datos
          <a href="#beginning">^</a>
        </h2>
        <p>Ejemplos de ataques de este tipo:</p>
        <p>
          Ataque sitio MySQL en 2011 por los hackers TinKode y Ne0h del grupo
          Rumano Slacker.Ro(volcado de la base de datos...)
        </p>
        <p>
          Ataque a la firma de seguridad HBGary Federal por parte de Anonymous
          2011
        </p>
      </section>
      <section>
        <h2 id="cap3">CROSS SITE SCRIPTING <a href="#beginning">^</a></h2>
        <p>
          Los ataques de Cross-Site Scripting o XSS constituyen un tipo de
          inyección de código,generalmente JavaScript(aunque puede ser
          aprovechado por otros lenguajes como HTML, etc.) que tiene como
          objetivo no atacar la maquina que presta el servicio web, sino al
          resto de usuarios que acceden a dichos servidores web, utilizando como
          pasarela para ello una aplicació vulnerable que este ejecutandose en
          el servidor implicado.
        </p>
        <p>
          El pricipal motivo de la existencia de esta vulnerabilidad es que la
          aplicacion web no filtra correctamente una cadena de texto recibida,
          en la que un posible atacante ha introducido intencionalmente
          instrucciones interpretables mediamte un lenguaje de programación
          dado.
        </p>
        <p>
          uno de los valores que aporta esta vulnerabilidad a los atacantes es
          su gran flexibilidad, que dependiendo de la aplicacion y el contexto
          en que se ecuentre permitiran desde el robo de variables de
          sesión(suplantación de usuario) hasta redireccion a sitios web
          fraudulentos(ataques de <i>phishing</i> bancario)
        </p>
        <p>
          Ranking Top 10 OWASP - El Cross-Site Scripting(XSS) ocupaba el tercer
          puesto en el ranking del 2013 y en el 2010 ocupapa el 2 puesto
        </p>
        <p>Recursos:</p>
        <div>
          <a href="https://www.nist.gov/">https://www.nist.gov/</a>
        </div>
        <div>
          <a href="http://xssed.com/">http://xssed.com/</a>
        </div>
        <h3>3.2 XSS REFLEJADO</h3>
        <p>El Cross-Site Scripting Reflejado es aquel en el cual al servidor le llega un fragmeto de código interpretable, generalmente HTML o JavaScript y lo reenvia introducido directamente en el código fuente de una página web vulnerable hacia la parte cliente de la aplicación, que suele ser le navegador web del cliente. El codigo sera interpretado por el navegador web del usuario y los efectos implicados se manifestarán en el mismo. El código inyectado no se almacena en ningun lado, siendo enviado directamente a la aplicacion web por algunos de los posibles campos recibidos.</p>
        <p>Ejemplo. Campo de Búsqueda de contenido. Si se introduce: </p> 
        <pre><code><h1>codigo_inyectado</h1></code></pre>
      </section>
    </main>
  </body>
</html>
